<html>

<head>
  <title>TODO supply a title</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="../../assets/css/style.css" rel="stylesheet" type="text/css" />

</head>

<body>

  <div class="modal show min-modal" id="rating-range" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Header -->
        <div class="modal-head">
          <div class="mr-auto">
            <div class="close-popup check-cr-cancel-button" data-dismiss="modal">
              <span class="icon-close"></span>
              
            </div>
          </div>

        </div>
        <!-- content -->
        <div class="mb-4 mt-3">
          <h2 class="required black-color text-center mb-5 azer-m">حول خدمةإصدار شهادة تعريف المنشأة</h2>
          <!-- start Rating Range -->
          <div class="rating-range-slider">
            <div class="rangeslider-wrap">
              <!-- default props -->
              <div class="d-flex justify-content-between mb-2">
                <p>لا أنصح بشدة</p>
                <p>أنصح بشدة</p>
              </div>
              <vue-slider ref="ratingRange" @change="returnTooltip" v-bind="options" v-model="value"></vue-slider>
            </div>
            <button id="nextBtn" class="mt-5 DS btn btn-primary mr-auto d-block"
              v-bind:class="{ disabled: !isPass }">إرسال</button>
          </div>


          <!-- End Rating Range -->
        </div>
      </div>

    </div>
  </div>

  <script src="../../assets/js/jquery-3.4.1.min.js" type="text/javascript"></script>
  <script src="../../assets/js/popper.min.js"></script>
  <script src="../../assets/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="https://unpkg.com/vue@2.5.2/dist/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-slider-component@latest/dist/vue-slider-component.umd.min.js"></script>
  <script>
    var ratingRange = new Vue({
      el: '.rating-range-slider',
      data: {
        isPass: false,
        value: -1,
        options: {
          dotSize: 20,
          width: 'auto',
          height: 8,
          contained: false,
          direction: 'rtl',
          data: null,
          dataLabel: 'label',
          dataValue: 'value',
          min: -1,
          max: 10,
          interval: 1,
          disabled: false,
          clickable: true,
          duration: 0.8,
          adsorb: true,
          lazy: false,
          tooltip: 'none',
          tooltipPlacement: 'top',
          tooltipFormatter: 'لا أنصح بشدة',
          useKeyboard: false,
          keydownHook: null,
          dragOnClick: false,
          enableCross: true,
          fixed: false,
          minRange: void 0,
          maxRange: void 0,
          order: true,
          marks: true,
          dotOptions: void 0,
          dotAttrs: void 0,
          process: true,
          dotStyle: void 0,
          railStyle: void 0,
          processStyle: void 0,
          tooltipStyle: void 0,
          stepStyle: void 0,
          stepActiveStyle: void 0,
          labelStyle: void 0,
          labelActiveStyle: void 0,
        }
      },
      methods: {
        returnTooltip: function (val) {
          if (val <= 6) {
            this.isPass = true;
            if (val > -1) {
              this.isPass = true
            } else {
              this.isPass = false

            }
            return (this.options.tooltipFormatter = 'لا أنصح بشدة');
          }

          else if (val <= 8) {
            this.isPass = true;
            return (this.options.tooltipFormatter = 'محايد');
          } else {
            this.isPass = true;
            return (this.options.tooltipFormatter = 'انصح بشدة');
          }

        },
        resetFun: function ($ref_name) {
          this.$refs[$ref_name].setValue(0);
        },

      },
      mounted() {
      },
      components: {
        'vueSlider': window['vue-slider-component'],
      }
    });
    Vue.config.devtools = true



  </script>

  <script>
    setTimeout(function () {
      // ratingRange.resetFun('ratingRange');
    }, 2000);
    const tooltip = '<div class="custom vue-slider-dot-tooltip-inner vue-slider-dot-tooltip-inner-top"><span class="vue-slider-dot-tooltip-text">لا أنصح بشدة</span></div>';
    $('.vue-slider-mark').each(function () {
      $(this).append(tooltip);
    });
    $('.custom.vue-slider-dot-tooltip-inner').each(function () {
      let prevText = $(this).prev('.vue-slider-mark-label').text();
      if (prevText <= 6) {
        $(this).find('.vue-slider-dot-tooltip-text').html('لا أنصح بشدة');

      } else if (prevText <= 8) {
        $(this).find('.vue-slider-dot-tooltip-text').html('محايد');

      } else {
        $(this).find('.vue-slider-dot-tooltip-text').html('انصح بشدة');
      }
    });


  </script>
</body>

</html>